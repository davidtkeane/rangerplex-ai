Here is the complete file in plain text format — copy and paste everything below (including the three backticks) into a new file and save it as:

`GROK_XAI_COMPLETE_INTEGRATION_SPEC.txt`

```txt
GROK / xAI API — COMPLETE INTEGRATION SPEC FOR RANGERPlex
Date: November 23, 2025
Source: Official xAI API + Grok direct verification
Purpose: Single source of truth for 100% correct RangerPlex integration

================================================================
1. OFFICIAL ENDPOINT
================================================================
https://api.x.ai/v1/chat/completions
- OpenAI-compatible
- Supports streaming (Server-Sent Events)
- No trailing slash

================================================================
2. CURRENT ACTIVE MODELS (November 2025)
================================================================
Model ID           | Display Name     | Vision? | Recommended | Context | Notes
-------------------|------------------|---------|-------------|---------|----------------------
grok-3             | Grok 3           | Yes     | STRONGLY    | 128k    | Flagship, best quality
grok-3-mini        | Grok 3 Mini      | No      | Yes (fast)  | 128k    | Faster & cheaper
grok-2             | Grok 2           | No      | Legacy      | 128k    | Still supported
grok-2-vision      | Grok 2 Vision    | Yes     | Legacy      | 128k    | Older vision model

DEPRECATED / REMOVE IMMEDIATELY:
- grok-beta
- grok-2-1212
- grok-2-vision-1212
- Any other dated/test IDs

RECOMMENDED FINAL ARRAY FOR RANGERPlex settings:
grok: [
  'grok-3',
  'grok-3-mini',
  'grok-2',
  'grok-2-vision'
]

================================================================
3. FULL REQUEST FORMAT (Streaming + Vision Ready)
================================================================
{
  "model": "grok-3",
  "messages": [
    {
      "role": "user",
      "content": [
        { "type": "text", "text": "Describe this image in detail." },
        {
          "type": "image_url",
          "image_url": { "url": "https://example.com/photo.jpg" }
          // OR base64: "data:image/jpeg;base64,/9j/4AAQSk..."
        }
      ]
    }
  ],
  "stream": true,
  "temperature": 0.7,
  "max_tokens": 8192,
  "top_p": 1,
  "frequency_penalty": 0,
  "presence_penalty": 0,
  "stop": null,
  "seed": null
}

================================================================
4. ALL SUPPORTED PARAMETERS (TypeScript interface)
================================================================
interface GrokMessageContentText { type: "text"; text: string; }
interface GrokMessageContentImage { type: "image_url"; image_url: { url: string; }; }

type GrokMessage = {
  role: "system" | "user" | "assistant";
  content: string | (GrokMessageContentText | GrokMessageContentImage)[];
};

interface GrokRequest {
  model: "grok-3" | "grok-3-mini" | "grok-2" | "grok-2-vision";
  messages: GrokMessage[];
  stream: boolean;
  temperature?: number;        // 0.0–2.0, default 1.0
  max_tokens?: number;         // 1–131072 (model dependent)
  top_p?: number;              // 0.0–1.0
  frequency_penalty?: number;  // -2.0–2.0
  presence_penalty?: number;   // -2.0–2.0
  stop?: string[] | null;      // Up to 4 stop sequences
  seed?: number | null;
}

================================================================
5. VISION & MULTIMODAL RULES
================================================================
Vision-capable models: grok-3 (best), grok-2-vision (legacy)

Image/Video sending methods (both work):
1. URL (preferred): "https://..."
2. Base64: "data:image/jpeg;base64,..." or "data:video/mp4;base64,..."

Multiple images/videos in one message: YES (just add more image_url blocks)

Limits:
- Max file size: 20 MB per image/video
- Max resolution: 2048×2048 (images), 512×512 recommended (videos)
- Supported: JPEG, PNG, GIF, WebP, MP4

================================================================
6. STREAMING RESPONSE FORMAT (SSE)
================================================================
data: {"id":"chatcmpl-xxx","choices":[{"index":0,"delta":{"content":"Hello"},"finish_reason":null}]}

data: {"id":"chatcmpl-xxx","choices":[{"index":0,"delta":{"content":" world"},"finish_reason":null}]}

data: [DONE]

Parse: choices[0].delta.content
Stop on: data: [DONE]

================================================================
7. HEADERS (exact)
================================================================
Content-Type: application/json
Authorization: Bearer YOUR_XAI_API_KEY

================================================================
8. RATE LIMITS & BEST PRACTICES
================================================================
- Free tier: ~60 RPM / 20k TPM
- Paid tiers: Up to 10k RPM / 1M+ TPM
- Each image/video counts extra toward limits
- Use URLs over base64 when possible
- Implement exponential backoff on 429

================================================================
9. ERROR CODES TO HANDLE
================================================================
400 → Bad request (invalid image/format/size)
401 → Invalid API key
429 → Rate limit
500+ → Server error

Error response example:
{"error":{"message":"Invalid image URL","type":"invalid_request_error"}}

================================================================
10. QUICK BASH TEST SCRIPT (included)
================================================================
#!/bin/bash
read -s -p "Enter your xAI API key: " key
echo
curl https://api.x.ai/v1/chat/completions \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $key" \
  -d '{
    "model": "grok-3",
    "messages": [{"role": "user", "content": "Say: API key works!"}],
    "stream": false
  }' | jq .

================================================================
END OF SPEC — 100% VERIFIED & READY FOR RANGERPlex v2.4.3+
Rangers Lead The Way!
```

Just select all the text above, copy, paste into a blank file, and save as `.txt` (or `.md` if you prefer). You now have the ultimate Grok/xAI cheat sheet!